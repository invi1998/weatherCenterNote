# 测试数据文件入库

- 站点参数入库
- 观测数据入库

# 站点参数文件入库

## 建表

```sql
/*==============================================================*/
/* Table: T_ZHOBTCODE                                           */
/*==============================================================*/
create table T_ZHOBTCODE
(
   obtid                varchar(10) not null comment '站点代码',
   cityname             varchar(30) not null comment '城市名称',
   provname             varchar(30) not null comment '省名称',
   lat                  int not null comment '纬度，单位：0.01度。',
   lon                  int not null comment '经度，单位：0.01度。',
   height               int comment '海拔高度，单位：0.1米。',
   upttime              timestamp not null comment '更新时间，数据被插入或更新的时间。',
   keyid                int not null auto_increment comment '记录编号，自动增长列。',
   primary key (obtid),
   unique key ZHOBTCODE_KEYID (keyid)
);

alter table T_ZHOBTCODE comment '这是一个参数表，存放了全国的站点参数，约800条记录，本表的数据极少变更。
应用程序对本表有inser和up';

```

## 程序大致流程

>   帮助文档
>
>   处理程序退出信号
>
>   打开日志文件
>
>   把全国站点参数文件加载到vstcode容器中
>
>   连接数据库
>
>   准备插入表的sql语句
>
>   准备更新表的sql语句
>
>   遍历vstcode容器
>
>   for(auto iter = vstcode,begin(); iter != vstcode.end(); ++iter)
>
>   {
>
> ​    从容器中取出一条记录到结构体stcode中
>
> ​    执行插入的sql语句
>
> ​    如果记录已经存在，就执行更新的sql语句(这里如何判断记录是否已经存在，如果记录存在，sql执行的返回结果是1062)
>
>   }
>
>   提交事务